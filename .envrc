#!/usr/bin/env bash
# Direnv configuration for Efrit development

# Load .env file if it exists
if [ -f .env ]; then
  set -a
  source .env
  set +a
  echo "✅ Loaded Efrit environment from .env"
else
  echo "⚠️  No .env file found. Copy .env.example to .env and configure."
fi

# Add project bin directory to PATH if it exists
if [ -d "./bin" ]; then
  PATH_add bin
fi

# Set default values if not provided
export EFRIT_MODEL="${EFRIT_MODEL:-claude-3-5-sonnet-20241022}"
export EFRIT_MAX_TOKENS="${EFRIT_MAX_TOKENS:-8192}"
export EFRIT_TEMPERATURE="${EFRIT_TEMPERATURE:-0.1}"

# Development helpers
export EFRIT_PROJECT_ROOT="$(pwd)"

# Show loaded configuration
echo "Efrit environment loaded:"
echo "  Model: $EFRIT_MODEL"
echo "  Max tokens: $EFRIT_MAX_TOKENS"
if [ -n "$ANTHROPIC_API_KEY" ]; then
  echo "  API Key: ***${ANTHROPIC_API_KEY: -4}"
else
  echo "  API Key: Not configured"
fi